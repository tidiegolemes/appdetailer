<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DetailPro - Estética Automotiva de Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #111827;
            color: #f3f4f6;
        }
        .hero-section {
            background: linear-gradient(rgba(17, 24, 39, 0.8), rgba(17, 24, 39, 0.8)), url('https://images.unsplash.com/photo-1583121274602-3e2820c69888?q=80&w=1920&auto=format&fit=crop') no-repeat center center;
            background-size: cover;
        }
        .hotspot {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: rgba(220, 38, 38, 0.7); /* Vermelho */
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid white;
            animation: pulse 2s infinite;
        }
        .hotspot:hover, .hotspot.active {
            transform: scale(1.5);
            background-color: rgba(239, 68, 68, 1);
            animation: none;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); } /* Vermelho */
            70% { box-shadow: 0 0 0 10px rgba(220, 38, 38, 0); } /* Vermelho */
            100% { box-shadow: 0 0 0 0 rgba(220, 38, 38, 0); } /* Vermelho */
        }
        .video-reel {
            transition: transform 0.3s ease;
        }
        .video-reel:hover {
            transform: scale(1.05);
        }
        /* Modal styles */
        .modal {
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body class="bg-black">

    <!-- Header -->
    <header class="bg-black/80 backdrop-blur-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-3xl font-bold text-white">Detail<span class="text-red-500">Pro</span></a>
            <div class="hidden md:flex space-x-8">
                <a href="#servicos" class="text-gray-300 hover:text-red-500 transition">Serviços</a>
                <a href="#reviews" class="text-gray-300 hover:text-red-500 transition">Avaliações</a>
                <a href="#contato" class="text-gray-300 hover:text-red-500 transition">Contato</a>
            </div>
            <a href="#agendamento" class="hidden md:block bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition">Agendar Agora</a>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-section py-24 text-white">
        <div class="container mx-auto px-6 text-center">
            <h1 class="text-5xl md:text-7xl font-bold mb-4">A Excelência que seu Carro Merece</h1>
            <p class="text-xl text-gray-300 mb-8 max-w-3xl mx-auto">Transformamos seu veículo com tecnologia de ponta e atenção obsessiva aos detalhes.</p>
            <a href="#servicos" class="bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-10 rounded-lg transition text-lg">Conheça Nossos Serviços</a>
        </div>
    </section>

    <!-- Interactive Services Section -->
    <section id="servicos" class="py-20 bg-gray-900">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-white">Serviços Interativos</h2>
                <p class="text-gray-400 mt-2">Clique nas áreas do veículo para ver os serviços e montar seu pacote.</p>
            </div>
            <div class="flex flex-col lg:flex-row gap-8 items-start">
                <!-- Car Image -->
                <div class="w-full lg:w-2/3 relative">
                    <img src="https://images.unsplash.com/photo-1616422285623-13ff0162193c?q=80&w=1200&auto=format&fit=crop" alt="Carro para detalhamento" class="rounded-lg w-full" onerror="this.onerror=null;this.src='https://placehold.co/1200x700/1f2937/ffffff?text=Imagem+Indisponível';">
                    <div id="hotspot-exterior" class="hotspot" style="top: 45%; left: 50%;"></div>
                    <div id="hotspot-interior" class="hotspot" style="top: 40%; left: 65%;"></div>
                    <div id="hotspot-rodas" class="hotspot" style="top: 78%; left: 75%;"></div>
                    <div id="hotspot-motor" class="hotspot" style="top: 55%; left: 20%;"></div>
                </div>

                <!-- Services Panel -->
                <div class="w-full lg:w-1/3 bg-black p-6 rounded-lg">
                    <div id="service-options">
                        <h3 class="text-2xl font-bold text-white mb-4">Selecione uma área do carro</h3>
                        <p class="text-gray-400">Os serviços disponíveis para a área selecionada aparecerão aqui.</p>
                    </div>
                    <div id="selected-services" class="mt-6">
                        <h3 class="text-2xl font-bold text-white border-t border-gray-700 pt-4">Seu Pacote</h3>
                        <ul id="service-list" class="mt-4 space-y-2 text-gray-300">
                            <!-- Serviços selecionados -->
                        </ul>
                        <div class="flex justify-between items-center mt-6 border-t border-gray-700 pt-4">
                            <span class="text-xl font-semibold">Total:</span>
                            <span id="total-price" class="text-3xl font-bold text-red-500">R$ 0,00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Video Reels Section -->
    <section id="reels" class="py-20 bg-black">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-white">Veja a Transformação</h2>
                <p class="text-gray-400 mt-2">Resultados que falam por si.</p>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="video-reel cursor-pointer"><img src="https://placehold.co/400x700/111827/ef4444?text=Polimento+Premium" class="rounded-lg"></div>
                <div class="video-reel cursor-pointer"><img src="https://placehold.co/400x700/111827/ef4444?text=Interior+de+Luxo" class="rounded-lg"></div>
                <div class="video-reel cursor-pointer"><img src="https://placehold.co/400x700/111827/ef4444?text=Rodas+Impecáveis" class="rounded-lg"></div>
                <div class="video-reel cursor-pointer"><img src="https://placehold.co/400x700/111827/ef4444?text=Antes+e+Depois" class="rounded-lg"></div>
            </div>
        </div>
    </section>

    <!-- Customer Reviews Section -->
    <section id="reviews" class="py-20 bg-gray-900">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-white">O que Nossos Clientes Dizem</h2>
                <p class="text-gray-400 mt-2">A satisfação deles é a nossa maior conquista.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-black p-6 rounded-lg">
                    <p class="text-gray-300">"Serviço impecável! Meu carro saiu parecendo novo. O polimento técnico removeu todos os riscos. Recomendo demais!"</p>
                    <div class="flex items-center mt-4">
                        <div class="text-yellow-400">★★★★★</div>
                        <p class="ml-4 font-bold">- João P.</p>
                    </div>
                </div>
                <div class="bg-black p-6 rounded-lg">
                    <p class="text-gray-300">"A limpeza interna foi a melhor que já fiz. Cuidaram de cada detalhe. A equipe da DetailPro é extremamente profissional."</p>
                    <div class="flex items-center mt-4">
                        <div class="text-yellow-400">★★★★★</div>
                        <p class="ml-4 font-bold">- Maria S.</p>
                    </div>
                </div>
                <div class="bg-black p-6 rounded-lg">
                    <p class="text-gray-300">"Vale cada centavo. A vitrificação deixou a pintura com um brilho incrível e protegida. Atendimento nota 10."</p>
                    <div class="flex items-center mt-4">
                        <div class="text-yellow-400">★★★★★</div>
                        <p class="ml-4 font-bold">- Carlos F.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Scheduling Section -->
    <section id="agendamento" class="py-20 bg-black">
        <div class="container mx-auto px-6 max-w-4xl">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-white">Agende seu Horário</h2>
                <p class="text-gray-400 mt-2">Garanta o melhor tratamento para o seu veículo.</p>
            </div>
            <form id="schedule-form" class="bg-gray-900 p-8 rounded-lg space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input id="client-name" type="text" placeholder="Seu Nome" class="w-full bg-gray-800 text-white p-3 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-red-500" required>
                    <input id="vehicle-model" type="text" placeholder="Modelo do Veículo (ex: Corolla, Civic)" class="w-full bg-gray-800 text-white p-3 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-red-500" required>
                </div>
                <textarea id="agendamento-servicos" rows="4" readonly class="w-full bg-gray-800 text-white p-3 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-red-500">Serviços Selecionados...</textarea>
                <input id="schedule-date" type="datetime-local" class="w-full bg-gray-800 text-white p-3 rounded-lg border border-gray-700 focus:outline-none focus:ring-2 focus:ring-red-500" required>
                <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 px-10 rounded-lg transition text-lg">Confirmar Agendamento</button>
            </form>
        </div>
    </section>

    <!-- Location & Contact -->
    <section id="contato" class="py-20 bg-gray-900">
        <div class="container mx-auto px-6 flex flex-col lg:flex-row gap-8">
            <div class="w-full lg:w-1/2">
                <h2 class="text-3xl font-bold text-white mb-4">Nossa Localização</h2>
                <p class="text-gray-400 mb-2">Rua da Estética, 123 - Bairro Premium</p>
                <p class="text-gray-400 mb-2">São Paulo, SP - 01234-567</p>
                <p class="text-gray-400 mb-4">Telefone: (11) 98765-4321</p>
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3657.145901559092!2d-46.65657188540853!3d-23.56309938468135!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x94ce59c8da0aa315%3A0x206c4804f2964647!2sAv.%20Paulista%2C%20S%C3%A3o%20Paulo%20-%20SP!5e0!3m2!1spt-BR!2sbr!4v1678886569123!5m2!1spt-BR!2sbr" width="100%" height="300" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" class="rounded-lg"></iframe>
            </div>
            <div class="w-full lg:w-1/2">
                 <h2 class="text-3xl font-bold text-white mb-4">Horário de Funcionamento</h2>
                 <ul class="text-gray-400 space-y-2">
                    <li><strong>Segunda a Sexta:</strong> 08:00 - 18:00</li>
                    <li><strong>Sábado:</strong> 08:00 - 14:00</li>
                    <li><strong>Domingo:</strong> Fechado</li>
                 </ul>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black py-6">
        <div class="container mx-auto px-6 text-center text-gray-500">
            <p>&copy; 2025 DetailPro. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Success Modal -->
    <div id="success-modal" class="modal fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center hidden opacity-0">
        <div class="bg-gray-800 p-8 rounded-lg text-center shadow-2xl">
            <h3 class="text-2xl font-bold text-green-400 mb-4">Agendamento Confirmado!</h3>
            <p class="text-gray-300 mb-6">Recebemos seu pedido. Entraremos em contato em breve para confirmar.</p>
            <button id="close-modal-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg">Fechar</button>
        </div>
    </div>

    <script type="module">
        // Importações do Firebase SDK
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Configuração do Firebase
        // A variável __firebase_config será injetada pelo ambiente.
        const firebaseConfig = typeof __firebase_config !== 'undefined' 
            ? JSON.parse(__firebase_config)
            : {
                apiKey: "YOUR_API_KEY",
                authDomain: "YOUR_AUTH_DOMAIN",
                projectId: "appdetailler", // Usando o projectId da sua imagem
                storageBucket: "YOUR_STORAGE_BUCKET",
                messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
                appId: "1:471615025811:web:cb77ae74d7518fee809366" // Usando o appId da sua imagem
            };

        // Inicializa o Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Lógica da Interface (UI)
        document.addEventListener('DOMContentLoaded', () => {
            const servicesDB = {
                exterior: [ { id: 1, name: 'Lavagem Técnica Externa', price: 150 }, { id: 2, name: 'Polimento Técnico', price: 800 }, { id: 3, name: 'Vitrificação de Pintura (1 ano)', price: 1200 }, ],
                interior: [ { id: 4, name: 'Limpeza Interna Detalhada', price: 250 }, { id: 5, name: 'Higienização de Ar Condicionado', price: 120 }, { id: 6, name: 'Hidratação de Couro', price: 200 }, ],
                rodas: [ { id: 7, name: 'Limpeza Detalhada de Rodas', price: 80 }, { id: 8, name: 'Vitrificação de Rodas', price: 300 }, ],
                motor: [ { id: 9, name: 'Limpeza Técnica de Motor', price: 200 }, ]
            };
            const hotspots = {
                exterior: document.getElementById('hotspot-exterior'),
                interior: document.getElementById('hotspot-interior'),
                rodas: document.getElementById('hotspot-rodas'),
                motor: document.getElementById('hotspot-motor'),
            };
            const serviceOptionsContainer = document.getElementById('service-options');
            const serviceListEl = document.getElementById('service-list');
            const totalPriceEl = document.getElementById('total-price');
            const agendamentoServicosEl = document.getElementById('agendamento-servicos');
            const scheduleForm = document.getElementById('schedule-form');
            const successModal = document.getElementById('success-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');

            let selectedServices = [];

            function renderServiceOptions(category) {
                Object.values(hotspots).forEach(h => h.classList.remove('active'));
                hotspots[category].classList.add('active');
                const services = servicesDB[category];
                let optionsHTML = `<h3 class="text-2xl font-bold text-white mb-4 capitalize">${category.replace('_', ' ')}</h3><div class="space-y-3">`;
                services.forEach(service => {
                    const isSelected = selectedServices.some(s => s.id === service.id);
                    optionsHTML += `
                        <label class="flex items-center justify-between bg-gray-800 p-3 rounded-lg cursor-pointer hover:bg-gray-700">
                            <div><span class="text-white">${service.name}</span><span class="block text-sm text-gray-400">R$ ${service.price.toFixed(2)}</span></div>
                            <input type="checkbox" data-id="${service.id}" data-name="${service.name}" data-price="${service.price}" class="form-checkbox h-5 w-5 text-red-600 bg-gray-700 border-gray-600 rounded focus:ring-red-500" ${isSelected ? 'checked' : ''}>
                        </label>`;
                });
                optionsHTML += '</div>';
                serviceOptionsContainer.innerHTML = optionsHTML;
            }

            function updateSelectedServices() {
                serviceListEl.innerHTML = '';
                let total = 0;
                let serviceNames = [];
                selectedServices.forEach(service => {
                    serviceListEl.innerHTML += `<li>${service.name} - R$ ${service.price.toFixed(2)}</li>`;
                    total += service.price;
                    serviceNames.push(service.name);
                });
                totalPriceEl.textContent = `R$ ${total.toFixed(2)}`;
                agendamentoServicosEl.value = serviceNames.length > 0 ? serviceNames.join(', ') : 'Nenhum serviço selecionado.';
            }

            Object.keys(hotspots).forEach(category => {
                hotspots[category].addEventListener('click', () => renderServiceOptions(category));
            });

            serviceOptionsContainer.addEventListener('change', (e) => {
                if (e.target.type === 'checkbox') {
                    const service = { id: parseInt(e.target.dataset.id), name: e.target.dataset.name, price: parseFloat(e.target.dataset.price) };
                    if (e.target.checked) {
                        selectedServices.push(service);
                    } else {
                        selectedServices = selectedServices.filter(s => s.id !== service.id);
                    }
                    updateSelectedServices();
                }
            });
            
            // Lidar com o envio do formulário de agendamento
            scheduleForm.addEventListener('submit', async (e) => {
                e.preventDefault(); // Impede o recarregamento da página
                
                const name = document.getElementById('client-name').value;
                const vehicle = document.getElementById('vehicle-model').value;
                const date = document.getElementById('schedule-date').value;
                const services = selectedServices.map(s => s.name);
                const total = selectedServices.reduce((sum, s) => sum + s.price, 0);

                try {
                    // Adiciona um novo documento à coleção "agendamentos"
                    const docRef = await addDoc(collection(db, "agendamentos"), {
                        clientName: name,
                        vehicleModel: vehicle,
                        scheduledAt: date,
                        services: services,
                        totalPrice: total,
                        createdAt: new Date() // Adiciona um timestamp de quando foi criado
                    });
                    console.log("Documento escrito com ID: ", docRef.id);
                    
                    // Mostra o modal de sucesso
                    successModal.classList.remove('hidden');
                    setTimeout(() => successModal.classList.remove('opacity-0'), 10);

                    // Limpa o formulário
                    scheduleForm.reset();
                    selectedServices = [];
                    updateSelectedServices();
                    renderServiceOptions('exterior');

                } catch (error) {
                    console.error("Erro ao adicionar documento: ", error);
                    alert("Ocorreu um erro ao agendar. Tente novamente.");
                }
            });

            // Fechar o modal
            closeModalBtn.addEventListener('click', () => {
                successModal.classList.add('opacity-0');
                setTimeout(() => successModal.classList.add('hidden'), 300);
            });

            // Estado inicial
            renderServiceOptions('exterior');
            updateSelectedServices();
        });
    </script>

</body>
</html>
